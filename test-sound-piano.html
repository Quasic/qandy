<!DOCTYPE html>
<html>
<head>
  <title>Sound & Piano Test - Qandy</title>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Courier New', monospace;
      padding: 20px;
    }
    #output {
      white-space: pre-wrap;
      border: 1px solid #333;
      padding: 10px;
      margin-top: 10px;
      min-height: 400px;
    }
    button {
      background-color: #333;
      color: #0f0;
      border: 1px solid #0f0;
      padding: 8px 15px;
      margin: 5px;
      cursor: pointer;
      font-family: 'Courier New', monospace;
    }
    button:hover {
      background-color: #0f0;
      color: #000;
    }
  </style>
</head>
<body>
  <h1>Qandy Sound & Piano Test</h1>
  
  <h2>Sound API Tests</h2>
  <button onclick="beep()">Beep</button>
  <button onclick="playNote('C4')">Play C4</button>
  <button onclick="playNote('E4')">Play E4</button>
  <button onclick="playNote('G4')">Play G4</button>
  <button onclick="playTune('C E G C5')">Play Scale</button>
  <button onclick="playTune('C:100 E:100 G:100 C5:400')">Quick Scale</button>
  <button onclick="stopTune()">Stop</button>
  
  <h2>Piano Tests</h2>
  <button onclick="playScale()">Play Scale</button>
  <button onclick="playMaryHadALamb()">Mary Had a Little Lamb</button>
  <button onclick="playTwinkleTwinkle()">Twinkle Twinkle</button>
  <button onclick="playHappyBirthday()">Happy Birthday</button>
  <button onclick="playCMajorChord()">C Major Chord</button>
  <button onclick="playChordProgression()">Chord Progression</button>
  
  <div id="output"></div>
  
  <script>
    // Minimal qandy environment for testing
    var output = document.getElementById('output');
    
    function print(text) {
      // Simple ANSI to HTML converter for testing
      text = text.replace(/\x1b\[1;31m/g, '<span style="color:#f00;font-weight:bold">');
      text = text.replace(/\x1b\[1;32m/g, '<span style="color:#0f0;font-weight:bold">');
      text = text.replace(/\x1b\[1;33m/g, '<span style="color:#ff0;font-weight:bold">');
      text = text.replace(/\x1b\[1;34m/g, '<span style="color:#00f;font-weight:bold">');
      text = text.replace(/\x1b\[1;35m/g, '<span style="color:#f0f;font-weight:bold">');
      text = text.replace(/\x1b\[1;36m/g, '<span style="color:#0ff;font-weight:bold">');
      text = text.replace(/\x1b\[1;37m/g, '<span style="color:#fff;font-weight:bold">');
      text = text.replace(/\x1b\[32m/g, '<span style="color:#0a0">');
      text = text.replace(/\x1b\[33m/g, '<span style="color:#aa0">');
      text = text.replace(/\x1b\[36m/g, '<span style="color:#0aa">');
      text = text.replace(/\x1b\[37m/g, '<span style="color:#aaa">');
      text = text.replace(/\x1b\[40;37m/g, '<span style="background:#000;color:#fff">');
      text = text.replace(/\x1b\[47;30m/g, '<span style="background:#fff;color:#000">');
      text = text.replace(/\x1b\[0m/g, '</span>');
      text = text.replace(/\n/g, '<br>');
      output.innerHTML += text;
    }
    
    function cls() {
      output.innerHTML = '';
    }
    
    // Load sound.js
    var script1 = document.createElement('script');
    script1.src = 'sound.js';
    document.head.appendChild(script1);
    
    // After sound.js loads, load piano.js
    script1.onload = function() {
      print('<span style="color:#0f0">✓ sound.js loaded</span><br>');
      
      var script2 = document.createElement('script');
      script2.src = 'piano.js';
      script2.onload = function() {
        print('<span style="color:#0f0">✓ piano.js loaded</span><br><br>');
      };
      document.head.appendChild(script2);
    };
    
    // Handle keyboard input
    document.addEventListener('keydown', function(e) {
      var key = e.key.toLowerCase();
      if (typeof pianoKeyHandler !== 'undefined') {
        pianoKeyHandler(key);
      }
    });
  </script>
</body>
</html>
